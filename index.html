<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Last Voyage - AI RPG</title>
  <link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
  <!-- Mode Selection -->
  <div id="mode-select" class="screen active">
    <div class="container">
      <h1>ğŸŒŠ The Last Voyage</h1>
      <p class="subtitle">AI-Driven Text RPG</p>
      
      <div class="mode-cards">
        <!-- Pre-written Story -->
        <div class="card" onclick="selectMode('prewritten')">
          <h2>ğŸ“– Classic Story</h2>
          <p>Play the handcrafted adventure "The Last Voyage"</p>
          <ul>
            <li>âœ… Consistent world & characters</li>
            <li>âœ… Crafted narrative quality</li>
            <li>âœ… Balanced gameplay</li>
          </ul>
          <button>Start Classic</button>
        </div>
        
        <!-- Dynamic World -->
        <div class="card" onclick="selectMode('dynamic')">
          <h2>ğŸŒ Create Your World</h2>
          <p>Build your own adventure from scratch</p>
          <ul>
            <li>âœ… Infinite possibilities</li>
            <li>âœ… Your story, your rules</li>
            <li>âœ… Unique every time</li>
          </ul>
          <button>Create World</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Pre-written: Story Intro -->
  <div id="prewritten-intro" class="screen">
    <div class="container">
      <h1>The Last Voyage</h1>
      <div class="lore-box">
        <p>
          The year is 2087. Rising seas have consumed 95% of Earth's landmass. 
          You are the captain of <strong>Horizon's Edge</strong>, one of the last 
          ships still sailing the endless ocean.
        </p>
        <p>
          Your crew:
        </p>
        <ul>
          <li><strong>Marcus Chen (Engineer)</strong>: Loyal, pessimistic, skilled</li>
          <li><strong>Elena Rodriguez (Navigator)</strong>: Brave, reckless, optimistic</li>
          <li><strong>The Cook</strong>: Mysterious, quiet, knows too much</li>
        </ul>
        <p>
          Survival depends on managing scarce resources: food, fuel, and morale.
        </p>
      </div>
      
      <button class="btn-primary" onclick="startPrewrittenGame()">
        âš“ Begin Adventure
      </button>
      <button class="btn-secondary" onclick="backToModeSelect()">
        â† Back
      </button>
    </div>
  </div>

  <!-- Dynamic: World Builder -->
  <div id="dynamic-builder" class="screen">
    <div class="container">
      <h1>ğŸŒ Create Your World</h1>
      
      <form id="world-form" onsubmit="generateWorld(event)">
        <div class="form-group">
          <label for="world-setting">World Setting *</label>
          <textarea 
            id="world-setting" 
            rows="3" 
            required
            placeholder="MÃ´ táº£ tháº¿ giá»›i cá»§a báº¡n (thá»ƒ loáº¡i, bá»‘i cáº£nh, khÃ´ng khÃ­)&#10;VÃ­ dá»¥: Cyberpunk detective trong Neo-Tokyo mÆ°a, nÄƒm 2157"></textarea>
          <small>Genre, setting, atmosphere - cÃ ng chi tiáº¿t cÃ ng tá»‘t!</small>
        </div>
        
        <div class="form-group">
          <label for="char-name">TÃªn Character *</label>
          <input 
            type="text" 
            id="char-name" 
            required
            placeholder="e.g., Sarah Chen, Detective Alex">
        </div>
        
        <div class="form-group">
          <label for="char-desc">MÃ´ Táº£ Character *</label>
          <textarea 
            id="char-desc" 
            rows="3" 
            required
            placeholder="Báº¡n lÃ  ai? (vai trÃ², tÃ­nh cÃ¡ch, background)&#10;VÃ­ dá»¥: TÃ´i lÃ  detective cá»©ng ráº¯n, tá»«ng lÃ  hacker, bá»‹ truy nÃ£ bá»Ÿi megacorp"></textarea>
        </div>
        
        <div class="form-group">
          <label for="scenario">Ká»‹ch Báº£n Má»Ÿ Äáº§u (Optional)</label>
          <input 
            type="text" 
            id="scenario"
            placeholder="e.g., TÃ´i tá»‰nh dáº­y trong háº»m, khÃ´ng nhá»› gÃ¬">
        </div>
        
        <div class="form-actions">
          <button type="submit" class="btn-primary">
            ğŸ¤– Generate World
          </button>
          <button type="button" class="btn-secondary" onclick="backToModeSelect()">
            â† Back
          </button>
        </div>
      </form>
      
      <!-- Generating Loader -->
      <div id="generating-loader" style="display:none">
        <div class="loader">
          <div class="spinner"></div>
          <p>ğŸ¤– AI Ä‘ang xÃ¢y dá»±ng tháº¿ giá»›i cá»§a báº¡n...</p>
          <p class="small">CÃ³ thá»ƒ máº¥t 10-20 giÃ¢y</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Dynamic: World Preview -->
  <div id="world-preview" class="screen">
    <div class="container">
      <h1>ğŸŒ Your World</h1>
      
      <div class="preview-box">
        <h3>World Overview</h3>
        <div id="world-summary"></div>
        
        <h3>Main Characters (NPCs)</h3>
        <div id="npc-list"></div>
        
        <h3>Starting Scenario</h3>
        <div id="scenario-preview"></div>
      </div>
      
      <div class="form-actions">
        <button class="btn-primary" onclick="startDynamicGame()">
          ğŸš€ Start Adventure
        </button>
        <button class="btn-secondary" onclick="regenerateWorld()">
          ğŸ”„ Regenerate World
        </button>
      </div>
    </div>
  </div>

  <!-- Main Game -->
  <div id="game-main" class="screen">
    <div class="game-container">
      <!-- Stats Panel -->
      <div class="stats-panel">
        <h3>Ship Status</h3>
        <div class="stat">
          <span class="stat-label">ğŸ Food:</span>
          <div class="stat-bar">
            <div id="food-bar" class="stat-fill" style="width: 100%"></div>
          </div>
          <span id="food-value">100</span>
        </div>
        <div class="stat">
          <span class="stat-label">â›½ Fuel:</span>
          <div class="stat-bar">
            <div id="fuel-bar" class="stat-fill" style="width: 100%"></div>
          </div>
          <span id="fuel-value">100</span>
        </div>
        <div class="stat">
          <span class="stat-label">â¤ï¸ Morale:</span>
          <div class="stat-bar">
            <div id="morale-bar" class="stat-fill" style="width: 50%"></div>
          </div>
          <span id="morale-value">50</span>
        </div>
        
        <div class="stat-info">
          <p><strong>Day:</strong> <span id="day-count">1</span></p>
          <p><strong>Location:</strong> <span id="location">Open Sea</span></p>
        </div>
      </div>

      <!-- Chat Area -->
      <div class="chat-area">
        <div id="chat-history" class="chat-history">
          <!-- Messages will be added here -->
        </div>
        
        <!-- Input -->
        <div class="input-area">
          <input 
            type="text" 
            id="player-input" 
            placeholder="What do you do?"
            onkeypress="if(event.key==='Enter') sendAction()">
          <button onclick="sendAction()" id="send-btn">Send</button>
        </div>
        
        <!-- Budget indicator -->
        <div class="budget-info">
          <small>Actions remaining: <span id="budget-remaining">200</span></small>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="src/main.js" type="module"></script>
</body>
</html>
